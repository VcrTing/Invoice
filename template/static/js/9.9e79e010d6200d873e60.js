webpackJsonp([9],{"0sE3":function(t,e){},OT5H:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={components:{MemberPaU:a("ZloS").a},name:"MemberPlus",data:function(){return{optionCODE:"plus"}}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("member-pa-u",{attrs:{option:this.optionCODE}},[e("div",{attrs:{slot:"page_title"},slot:"page_title"},[this._v("新增客戶")])])},staticRenderFns:[]};var o=a("VU/8")(n,i,!1,function(t){a("dhFU")},"data-v-4eb5b558",null);e.default=o.exports},Vfax:function(t,e){},ZloS:function(t,e,a){"use strict";var n=a("5nBN"),i=a.n(n),o=(a("wYMm"),a("NAQQ")),s=a("/xUl"),r=a("mvHQ"),m=a.n(r),c=(a("0jG4"),a("I76R")),l=a.n(c),d=a("BO1k"),u=a.n(d),p={name:"LabelInput",props:{the_placeholder:{type:String},the_name:{type:String},the_validate_types:{type:Array,default:function(){return["empty"]}},the_min_length:{type:Number,default:3},the_max_length:{type:Number,default:60}},data:function(){return{value:"",tip_value:""}},methods:{validate:function(){var t=!0,e=!1,a=void 0;try{for(var n,i=u()(this.the_validate_types);!(t=(n=i.next()).done);t=!0)n.value}catch(t){e=!0,a=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw a}}}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:t.the_name}},[t._t("default")],2),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"form-control",attrs:{type:"text",id:t.the_name,placeholder:t.the_placeholder},domProps:{value:t.value},on:{change:t.validate,input:function(e){e.target.composing||(t.value=e.target.value)}}}),t._v(" "),a("small",{staticClass:"form-text text-muted",attrs:{id:t.the_name+"Tip"}},[t._v(t._s(t.tip_value))])])},staticRenderFns:[]};var v=a("VU/8")(p,_,!1,function(t){a("0sE3")},"data-v-287d2560",null).exports,h={name:"MemberPlusForm",props:{the_member:{type:Object,default:null},the_option:{type:String}},components:{LabelInput:v},data:function(){return{areas:[],tags:[],pay_times:[],pay_ways:[],named:"",num:"",addr:"",pay_way:0,pay_time:"",contact_named:"",contact_phoned:"",contact_area:0,tag:0,tip_named:"",tip_num:"",tip_addr:"",tip_contact_named:"",tip_contact_phoned:""}},mounted:function(){var t=this;this.pay_ways=i.a.show_paymet(),null!=this.the_member&&"{}"!=m()(this.the_member)&&(this.num=this.the_member.num,this.addr=this.the_member.addr,this.named=this.the_member.named,this.pay_time=this.the_member.pay_time.id,this.pay_way=this.the_member.pay_way,this.contact_named=this.the_member.contact_named,this.contact_phoned=this.the_member.phoned,this.contact_area=this.the_member.area.id,this.tag=this.the_member.tag.id),s.a.area.getList_Area({},!0).then(function(e){t.areas=e,0==t.contact_area&&(t.contact_area=e[0].id)}),s.a.tag.getList_Tag({},!0).then(function(e){t.tags=e,0==t.tag&&(t.tag=e[0].id)}),s.a.pay_time.getList({},!0).then(function(e){t.pay_times=e,""==t.pay_time&&(e.map(function(e){0==e.pay_time&&(t.pay_time=e.id)}),t.pay_time||(t.pay_time=e[0].id))})},methods:{_submit:function(t){var e=this;if("update"==this.the_option){var a=this.the_member.id;s.a.member.edit(a,t).then(function(t){s.a.judge_response(t)&&(o.a.showToast("修改成功！！！"),setTimeout(function(){e.$router.push("/home/member")},2e3))})}else s.a.member.add(t).then(function(t){s.a.judge_response(t)&&(o.a.showToast("新增成功！！！"),setTimeout(function(){e.$router.push("/home/member")},2e3))})},submitMemberForm:function(){if(1==this.validateForm()){var t={num:this.num,named:this.named,addr:this.addr,contact_named:this.contact_named,phoned:this.contact_phoned,tag_id:this.tag,area_id:this.contact_area,pay_time_id:this.pay_time,pay_way:this.pay_way};this._submit(t)}},tipClose:function(t){var e=this;setTimeout(function(){"num"==t?e.tip_num="":"named"==t?e.tip_named="":"addr"==t?e.tip_addr="":"contact_named"==t?e.tip_contact_named="":"contact_phoned"==t&&(e.tip_contact_phoned="")},4200)},tipForm:function(t,e){var a="";1!=t&&(a=t),"num"==e?this.tip_num=a:"named"==e?this.tip_named=a:"addr"==e?this.tip_addr=a:"contact_named"==e?this.tip_contact_named=a:"contact_phoned"==e&&(this.tip_contact_phoned=a),this.tipClose(e)},validateForm:function(){var t=!0,e=l.a.val_empty(this.num,"貨號");return 1==e?(e=l.a.val_char(this.num,"貨號"),this.tipForm(e,"num")):this.tipForm(e,"num"),1!=e&&(t=!1),1==(e=l.a.val_empty(this.named,"名稱"))?(e=l.a.val_char(this.named,"名稱"),this.tipForm(e,"named")):this.tipForm(e,"named"),1!=e&&(t=!1),1==(e=l.a.val_empty(this.addr,"地址"))||this.tipForm(e,"addr"),1!=e&&(t=!1),1==(e=l.a.val_empty(this.contact_named,"聯絡人名稱"))?(e=l.a.val_char(this.contact_named,"聯絡人名稱"),this.tipForm(e,"contact_named")):this.tipForm(e,"contact_named"),1!=e&&(t=!1),1==(e=l.a.val_empty(this.contact_phoned,"聯絡人電話"))?(e=l.a.val_char(this.contact_phoned,"聯絡人電話"),this.tipForm(e,"contact_phoned")):this.tipForm(e,"contact_phoned"),1!=e&&(t=!1),t}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"row"},[a("div",{staticClass:"form-group col-sm-5"},[a("label",{attrs:{for:"named"}},[t._v("名稱")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.named,expression:"named"}],staticClass:"form-control",attrs:{type:"text",id:"named",placeholder:"名稱"},domProps:{value:t.named},on:{input:function(e){e.target.composing||(t.named=e.target.value)}}}),t._v(" "),a("small",{staticClass:"form-text text-muted",attrs:{id:"namedTip"}},[t._v(t._s(t.tip_named))])]),t._v(" "),a("div",{staticClass:"form-group col-sm-3"},[a("label",{attrs:{for:"num"}},[t._v("編號")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.num,expression:"num"}],staticClass:"form-control",attrs:{type:"text",id:"num",placeholder:"編號"},domProps:{value:t.num},on:{input:function(e){e.target.composing||(t.num=e.target.value)}}}),t._v(" "),a("small",{staticClass:"form-text text-muted",attrs:{id:"numTip"}},[t._v(t._s(t.tip_num))])]),t._v(" "),a("div",{staticClass:"form-group col-sm-2"},[a("label",{attrs:{for:"num"}},[t._v("付款方式")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.pay_way,expression:"pay_way"}],staticClass:"form-control",attrs:{id:"pay_time"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.pay_way=e.target.multiple?a:a[0]}}},t._l(t.pay_ways,function(e,n){return a("option",{key:n,domProps:{value:n}},[t._v(t._s(e))])}),0)]),t._v(" "),a("div",{staticClass:"form-group col-sm-2"},[a("label",{attrs:{for:"num"}},[t._v("付款期限")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.pay_time,expression:"pay_time"}],staticClass:"form-control",attrs:{id:"pay_time"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.pay_time=e.target.multiple?a:a[0]}}},t._l(t.pay_times,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.named))])}),0)]),t._v(" "),a("div",{staticClass:"form-group col-sm-3"},[a("label",{attrs:{for:"tag"}},[t._v("類型")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tag,expression:"tag"}],staticClass:"form-control",attrs:{id:"tag"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.tag=e.target.multiple?a:a[0]}}},t._l(t.tags,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.named))])}),0)]),t._v(" "),a("div",{staticClass:"form-group col-sm-9"},[a("label",{attrs:{for:"addr"}},[t._v("地址")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addr,expression:"addr"}],staticClass:"form-control",attrs:{type:"text",id:"addr",placeholder:"地址"},domProps:{value:t.addr},on:{input:function(e){e.target.composing||(t.addr=e.target.value)}}}),t._v(" "),a("small",{staticClass:"form-text text-muted",attrs:{id:"addrTip"}},[t._v(t._s(t.tip_addr))])]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"form-group col-sm-6"},[a("label",{attrs:{for:"contact_named"}},[t._v("名稱")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contact_named,expression:"contact_named"}],staticClass:"form-control",attrs:{type:"text",id:"contact_named",placeholder:"名稱"},domProps:{value:t.contact_named},on:{input:function(e){e.target.composing||(t.contact_named=e.target.value)}}}),t._v(" "),a("small",{staticClass:"form-text text-muted",attrs:{id:"contact_namedTip"}},[t._v(t._s(t.tip_contact_named))])]),t._v(" "),a("div",{staticClass:"form-group col-sm-6"},[a("label",{attrs:{for:"contact_area"}},[t._v("電話")]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.contact_area,expression:"contact_area"}],staticClass:"form-control",attrs:{id:"contact_area"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.contact_area=e.target.multiple?a:a[0]}}},t._l(t.areas,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.area))])}),0)]),t._v(" "),a("div",{staticClass:"col-sm-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.contact_phoned,expression:"contact_phoned"}],staticClass:"form-control",attrs:{type:"text",id:"contact_phoned",placeholder:"電話"},domProps:{value:t.contact_phoned},on:{input:function(e){e.target.composing||(t.contact_phoned=e.target.value)}}}),t._v(" "),a("small",{staticClass:"form-text text-muted",attrs:{id:"contact_phonedTip"}},[t._v(t._s(t.tip_contact_phoned))])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-sm-12 mt-2"},[e("h5",{staticClass:"overflow-hidden"},[this._v("聯絡人")])])}]};var y={name:"MemberPlus",components:{MemberPaUForm:a("VU/8")(h,f,!1,function(t){a("Vfax")},"data-v-0e048b33",null).exports,CustomModal:a("uT2u").a},props:{option:{type:String}},data:function(){return{memberId:null,membery:null,msg:"未檢測到需要修改的用戶！"}},mounted:function(){"plus"==this.option?this.judgePlus():"update"==this.option&&this.judgeUpdate()},methods:{judgePlus:function(){this.membery={}},judgeUpdate:function(){var t=this;this.memberId=this.$route.query.memberId,null!=this.memberId?s.a.member.getOne(this.memberId).then(function(e){t.membery=e}):o.a.showModal("memberUpdateModal")},submitMember:function(){this.$refs.memberOption.submitMemberForm()},done:function(){var t=this;o.a.closeModal("memberUpdateModal"),setTimeout(function(){t.$router.push("/home/member")},700)}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-wrapper bg-hui h-100"},[a("div",{staticClass:"row mt-1"},[a("div",{staticClass:"col-sm-12"},[a("h2",{staticClass:"fw-b text-main"},[t._t("page_title")],2)])]),t._v(" "),a("div",{staticClass:"row mt-2 pt-1"},[a("div",{staticClass:"col-sm-12 data-panel-wrapper"},[a("div",{staticClass:"data-panel-wrapper def-shadow br-horizonS bg-white pt-3"},[null!=this.membery?a("member-pa-u-form",{ref:"memberOption",attrs:{the_member:t.membery,the_option:t.option}}):t._e(),t._v(" "),a("div",{staticClass:"mt-3 float-right"},[a("button",{staticClass:"btn btn-info btn-lg",on:{click:t.submitMember}},[t._v("\n            保存\n          ")])])],1)])]),t._v(" "),a("custom-modal",{attrs:{need_cancel:!1,title:"提示",txt:t.msg,id_prefix:"memberUpdate"},on:{done_Father:t.done}},[a("div",{attrs:{slot:"submit_text"},slot:"submit_text"},[t._v("跳轉至“展示”")])])],1)},staticRenderFns:[]};var g=a("VU/8")(y,b,!1,function(t){a("aDT/")},"data-v-73c46faa",null);e.a=g.exports},"aDT/":function(t,e){},dhFU:function(t,e){}});
//# sourceMappingURL=9.9e79e010d6200d873e60.js.map