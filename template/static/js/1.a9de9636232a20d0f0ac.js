webpackJsonp([1],{"01XN":function(t,e){},"1kS7":function(t,e){e.f=Object.getOwnPropertySymbols},"5MlZ":function(t,e,i){"use strict";var s={name:"ListingMemberFaceCard",props:{the_member:{type:Object},is_icon:{type:Boolean}},methods:{changeSomething:function(){this.$emit("changeSignal")}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("table",[i("tr",[t._m(0),t._v(" "),null!=t.the_member?i("td",{staticClass:"pl-3"},[i("div",[t._v("\n          "+t._s(t.the_member.named)+" \n          "),t.is_icon?i("i",{staticClass:"fa fa-edit text-primary hand",on:{click:t.changeSomething}}):t._e()]),t._v(" "),i("div",{staticClass:"fs-12"},[t._v("编号："+t._s(t.the_member.num))])]):t._e()])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"member-face"},[e("div",{staticClass:"img"})])}]};var a=i("VU/8")(s,n,!1,function(t){i("6fz4")},"data-v-080cbf12",null);e.a=a.exports},"6fz4":function(t,e){},"9Wpn":function(t,e){},DB4M:function(t,e){},DZcW:function(t,e){},Dd8w:function(t,e,i){"use strict";e.__esModule=!0;var s,n=i("woOf"),a=(s=n)&&s.__esModule?s:{default:s};e.default=a.default||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t}},EMcx:function(t,e){},JTOV:function(t,e){},NpIQ:function(t,e){e.f={}.propertyIsEnumerable},R4wc:function(t,e,i){var s=i("kM2E");s(s.S+s.F,"Object",{assign:i("To3L")})},To3L:function(t,e,i){"use strict";var s=i("+E39"),n=i("lktj"),a=i("1kS7"),r=i("NpIQ"),l=i("sB3e"),o=i("MU5D"),c=Object.assign;t.exports=!c||i("S82l")(function(){var t={},e={},i=Symbol(),s="abcdefghijklmnopqrst";return t[i]=7,s.split("").forEach(function(t){e[t]=t}),7!=c({},t)[i]||Object.keys(c({},e)).join("")!=s})?function(t,e){for(var i=l(t),c=arguments.length,d=1,_=a.f,u=r.f;c>d;)for(var v,m=o(arguments[d++]),p=_?n(m).concat(_(m)):n(m),h=p.length,f=0;h>f;)v=p[f++],s&&!u.call(m,v)||(i[v]=m[v]);return i}:c},U3Nl:function(t,e){},U5HZ:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("mvHQ"),n=i.n(s),a=i("Dd8w"),r=i.n(a),l=i("7t+N"),o=i.n(l),c=i("5nBN"),d=i.n(c),_=i("NAQQ"),u=(i("I76R"),i("wYMm"),i("/xUl")),v=i("U6je"),m=i("BO1k"),p=i.n(m),h={components:{HelpIcon:i("r0bt").a},name:"ListingPlusTop",props:{_listings:{type:Array},_select:{type:Array}},data:function(){return{isSort:!1,isAll:!1}},methods:{sortOption:function(){this._listings.reverse(),this.isSort=!this.isSort,this.isSort?_.a.showToast("逆序排列"):_.a.showToast("顺序排列")},tipSelect:function(){_.a.showToast("双击即可全选与清空选择")},selectOption:function(){var t=this;if(this.isAll)this._select.splice(1,this._select.length-1),this.isAll=!1,_.a.showToast("移除全选");else{var e=this._listings.filter(function(e){return!_.a.inList(e.id,t._select)}),i=!0,s=!1,n=void 0;try{for(var a,r=p()(e);!(i=(a=r.next()).done);i=!0){var l=a.value;this._select.push(l.id)}}catch(t){s=!0,n=t}finally{try{!i&&r.return&&r.return()}finally{if(s)throw n}}this.isAll=!0,_.a.showToast("全选")}}}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row of-visible"},[t._m(0),t._v(" "),i("div",{staticClass:"col-sm-6 pt-1 text-right of-visible"},[i("button",{staticClass:"btn btn-info btn-sm pb-0 float-right",on:{click:t.sortOption}},[t.isSort?i("i",{staticClass:"fa fa-toggle-up"}):i("i",{staticClass:"fa fa-toggle-down "})]),t._v(" "),i("button",{staticClass:"btn btn-light btn-sm pb-0 float-right mr-2",on:{click:t.selectOption}},[t.isAll?i("i",{staticClass:"fa fa-remove"}):i("i",{staticClass:"fa fa-plus"})])])]),t._v(" "),i("table",{staticClass:"table m-0"},[i("tr",{staticClass:"text-left"},[i("td",{staticClass:"text-accent",attrs:{width:"6%"}},[t._v("#")]),t._v(" "),i("td",{attrs:{width:"10%"}},[t._v("货号")]),t._v(" "),i("td",{attrs:{width:"20%"}},[t._v("描述")]),t._v(" "),i("td",{attrs:{width:"15%"}},[i("div",{staticClass:"pl-2"},[t._v("\n          数量\n          "),i("help-icon",{attrs:{help_code:"listing_plus_num_input"}})],1)]),t._v(" "),i("td",{attrs:{width:"15%"}},[i("div",{staticClass:"pl-3"},[t._v("\n          单价\n          "),i("help-icon",{attrs:{help_code:"listing_plus_price_input"}})],1)]),t._v(" "),i("td",{staticClass:"text-center",attrs:{width:"9%"}},[t._v("\n        折扣\n        "),i("help-icon",{attrs:{help_code:"listing_plus_discount_input"}})],1),t._v(" "),i("td",{staticClass:"text-center",attrs:{width:"15%"}},[t._v("价格")]),t._v(" "),i("td",{staticClass:"text-center",attrs:{width:"10%"}},[t._v("选择")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-sm-6 pt-2"},[e("h5",{staticClass:"fw-none"},[this._v("\n        菜品内容\n      ")])])}]};var g=i("VU/8")(h,f,!1,function(t){i("01XN")},"data-v-4a405d47",null).exports,b=(i("0jG4"),{name:"ListingPlusBody",props:{_listingContent:{type:Array},_select:{type:Array}},mounted:function(){},methods:{unit:function(t){return d.a.ser_unit(t)},inList:function(t,e){return _.a.inList(t,e)},ser_timed:function(t){return _.a.timed.ser_timed(t,!0,!1)},changeCount:function(t,e){var i=o()("#count_"+t).val();this._listingContent[e].count=i},changePrice:function(t,e){var i=o()("#price_"+t).val();this._listingContent[e].price=i},itemOption:function(t,e){if("add"==e)this._select.push(t);else if("remove"==e){var i=_.a.indexList(t,this._select);this._select.length<2?_.a.showToast("至少选择一项菜品。"):this._select.splice(i,1)}}}}),C={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("table",{staticClass:"table m-0 table-top-line-none"},[i("tbody",{staticClass:"listing-tbody"},t._l(t._listingContent,function(e,s){return i("tr",{key:e.id,staticClass:"prices-item text-left",class:{inActive:!t.inList(e.id,t._select),"bg-white":t.inList(e.id,t._select)}},[i("td",{staticClass:"text-accent",attrs:{width:"6%"}},[t._v(t._s(s+1))]),t._v(" "),i("td",{attrs:{width:"10%"}},[t._v(t._s(e.num))]),t._v(" "),i("td",{attrs:{width:"20%"}},[t._v(t._s(e.named))]),t._v(" "),i("td",{staticClass:"table-input-td ",attrs:{width:"15%"}},[i("div",{staticClass:"input-group input-group-sm float-left listing-num-input listing-input-sm"},[i("input",{staticClass:"form-control",attrs:{type:"text",id:"count_"+e.id},domProps:{value:e.count},on:{keyup:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.changeCount(e.id,s)},change:function(i){return t.changeCount(e.id,s)}}}),t._v(" "),i("div",{staticClass:"input-group-append"},[i("span",{staticClass:"input-group-text",attrs:{id:"basic-addon2"}},[t._v(t._s(t.unit(e.unit)))])])])]),t._v(" "),i("td",{staticClass:"table-input-td",attrs:{width:"15%"}},[i("div",{staticClass:"float-left mt-1 text-input"},[t._v("$")]),t._v(" "),i("div",{staticClass:"input-group input-group-sm float-left listing-num-input"},[i("input",{staticClass:"form-control",attrs:{type:"text",id:"price_"+e.id},domProps:{value:e.price},on:{keyup:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.changePrice(e.id,s)},change:function(i){return t.changePrice(e.id,s)}}})])]),t._v(" "),i("td",{attrs:{width:"9%"}},[t._v("\n          "+t._s(e.zk)+"\n        ")]),t._v(" "),i("td",{staticClass:"text-center",attrs:{width:"15%"}},[t._v("\n          "+t._s((e.count*e.price).toFixed(2))+"\n        ")]),t._v(" "),i("td",{staticClass:"text-center",attrs:{width:"10%"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.inList(e.id,t._select),expression:"inList(f.id, _select)"}]},[i("i",{staticClass:"fa hand listing-table-icon fa-remove",on:{click:function(i){return t.itemOption(e.id,"remove")}}})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.inList(e.id,t._select),expression:"!inList(f.id, _select)"}]},[i("i",{staticClass:"fa hand listing-table-icon fa-plus",on:{click:function(i){return t.itemOption(e.id,"add")}}})])])])}),0)])])},staticRenderFns:[]};var y=i("VU/8")(b,C,!1,function(t){i("c3q6")},"data-v-5f23380e",null).exports,w=i("ryLw"),x=i("5MlZ"),P=i("s89H"),S={name:"ListingPricesCard",props:{_prices:{type:Object},is_icon:{type:Boolean,default:!1}},methods:{changeSomething:function(){this.$emit("changeSignal")}}},k={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fs-12"},[t._m(0),t._v(" "),i("div",{staticClass:"float-left ml-2"},[i("div",[t._v("\n      单号："+t._s(t._prices.num)+" \n      "),t.is_icon?i("i",{staticClass:"fa fa-edit text-primary hand",on:{click:t.changeSomething}}):t._e()]),t._v(" "),i("div",[t._v("\n      所属客户："+t._s(t._prices.membery.num)+" "+t._s(t._prices.membery.named)+"\n    ")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"float-left icon-wrapper"},[e("i",{staticClass:"fa fa-list-alt"})])}]};var L=i("VU/8")(S,k,!1,function(t){i("U3Nl")},"data-v-09bf93e9",null).exports,M={name:"ListingTimedInoput",props:{the_name:{type:String},the_list:{type:Array}},data:function(){return{value:0}},methods:{tipToast:function(t){_.a.showToast(t)},valueSubmit:function(){this.$emit("returnValue",this.value)}}},$={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-group m-0"},[i("label",{staticClass:"col-form-label p-0",attrs:{for:"select_"+t.the_name}},[t._t("input_txt")],2),t._v(" "),i("div",{staticClass:"input-wrapper"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"form-control fs-14",attrs:{id:"select_"+t.the_name,name:t.the_name},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.value=e.target.multiple?i:i[0]},t.valueSubmit]}},t._l(t.the_list,function(e,s){return i("option",{key:s,domProps:{value:s}},[t._v(t._s(e))])}),0)])])},staticRenderFns:[]};var F=i("VU/8")(M,$,!1,function(t){i("X7IM")},"data-v-7bbb2fa8",null).exports,E={name:"ListingPlusFooter",components:{SimpleInput:w.a,ListingMemberFaceCard:x.a,LoadingMiddle:P.a,ListingPricesCard:L,SimpleSelect:F},props:{the_prices:{type:Object}},data:function(){return{timed_listing:"",numed_listing:"",payment_listing:0,payments:[]}},created:function(){this.payments=d.a.show_paymet()},methods:{_pricesSubmit:function(){this.$emit("pricesSubmit_Father")},pricesSubmit:function(){_.a.click("pricesResBtn")},pricesPdfView:function(){this.$emit("pricesPdfView_Father")},reciverTimed:function(t){this.timed_listing=t},reciverNumed:function(t){var e=this;this.numed_listing=t,u.a.listing.getOneByAny({num:t}).then(function(i){u.a.judge_response(i[0])&&(e.$emit("reciverNumed_Father",""),_.a.showToast("发票编号“"+t+"”重复，数据库中已有相同编号的发票！"))})},reciverPayment:function(t){this.payment_listing=t},validateInput:function(){var t="";return""==this.timed_listing&&(t="请检查发票时间的输入！"),""==this.numed_listing&&(t="请检查发票编号的输入！"),""==t?{timed:this.timed_listing,numed:this.numed_listing,payment:this.payment_listing}:(_.a.showToast(t),!1)},changePrices:function(){_.a.showModal("sureChangePricesModal")}}},V={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-3"},[i("h5",{staticClass:"fw-none text-accent"},[t._v("其他信息")]),t._v(" "),null!=t.the_prices?i("listing-prices-card",{attrs:{_prices:t.the_prices,is_icon:!0},on:{changeSignal:t.changePrices}}):i("div",{staticClass:"member-loading-wrapper"},[i("loading-middle")],1)],1),t._v(" "),i("div",{staticClass:"col-sm-3 pt-4"},[i("div",{staticClass:"fs-14 timed-wrapper"},[i("simple-input",{attrs:{the_name:"listing_numd",the_tip_header:"发票编号",the_placeholder:"- -",the_min_length:3,the_max_length:12},on:{returnValue:t.reciverNumed}},[i("div",{attrs:{slot:"input_txt"},slot:"input_txt"},[t._v("发票编号：")])])],1),t._v(" "),i("div",{staticClass:"fs-14 timed-wrapper"},[i("simple-input",{attrs:{the_name:"listing_timed",the_tip_header:"发票时间",the_placeholder:"yyyy-mm-dd"},on:{returnValue:t.reciverTimed}},[i("div",{attrs:{slot:"input_txt"},slot:"input_txt"},[t._v("发票时间：")])])],1)]),t._v(" "),i("div",{staticClass:"col-sm-3 pt-1"},[i("div",{staticClass:"p-2 m-2 fs-12"},[t._v(" ")]),t._v(" "),i("div",{staticClass:"fs-14 timed-wrapper"},[i("simple-select",{attrs:{the_name:"listing_payment",the_list:t.payments},on:{returnValue:t.reciverPayment}},[i("div",{attrs:{slot:"input_txt"},slot:"input_txt"},[t._v("支付方式：")])])],1)]),t._v(" "),i("div",{staticClass:"col-sm-1 flex-center"},[i("button",{staticClass:"hidden",attrs:{id:"pricesResBtn"},on:{click:t._pricesSubmit}})]),t._v(" "),i("div",{staticClass:"col-sm-2 pt-2"},[i("button",{staticClass:"btn btn-light btn-block btn-sm",on:{click:t.pricesPdfView}},[t._v("预览 Pdf")]),t._v(" "),i("button",{staticClass:"btn btn-outline-info btn-block btn-sm",on:{click:t.pricesSubmit}},[t._v("提交结果")])])])},staticRenderFns:[]};var N=i("VU/8")(E,V,!1,function(t){i("pGnZ")},"data-v-07ec1744",null).exports,O=i("U5hB"),T={components:{ListingPricesCard:L},data:function(){return{pricesList:[],pricesChoise:null}},mounted:function(){var t=this;u.a.prices.getList_Prices().then(function(e){t.loadFirstChoise(e[0]),t.pricesList=e})},methods:{loadFirstChoise:function(t){null==this.pricesChoise&&(this.pricesChoise=t)},ser_timed:function(t){return _.a.timed.ser_timed(t,!0,!0)},choised:function(t){var e=!0,i=!1,s=void 0;try{for(var n,a=p()(this.pricesList);!(e=(n=a.next()).done);e=!0){var r=n.value;r.id==t&&(this.pricesChoise=r)}}catch(t){i=!0,s=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw s}}},choiseSubmit:function(){null==this.pricesChoise?_.a.showToast("您还未选择一名客户"):(this.$emit("returnChoised",this.pricesChoise),_.a.closeModal("pricesChoiseModal"))}}},R={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal fade",attrs:{id:"pricesChoiseModal","data-backdrop":"static","data-keyboard":"false",tabindex:"-1",role:"dialog","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"}},[i("div",{staticClass:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header"},[t._m(0),t._v(" "),null!=t.pricesChoise?i("listing-prices-card",{attrs:{_prices:t.pricesChoise}}):t._e()],1),t._v(" "),i("div",{staticClass:"modal-body pt-0 pb-0"},[i("div",{},[t.pricesList.length>0?i("table",{staticClass:"table table-top-line-none"},t._l(t.pricesList,function(e){return i("tr",{key:e.id,staticClass:"hand",class:{"item-choise":e.id==t.pricesChoise.id},on:{click:function(i){return t.choised(e.id)}}},[i("td",[t._v(t._s(e.num))]),t._v(" "),i("td",[t._v(t._s(t.ser_timed(e.start_time)))]),t._v(" "),i("td",[t._v(t._s(e.membery.num)+" "+t._s(e.membery.named))])])}),0):t._e()])]),t._v(" "),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("离开")]),t._v(" "),i("button",{staticClass:"btn btn-main",attrs:{type:"button"},on:{click:t.choiseSubmit}},[t._v("确认选择")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{staticClass:"modal-title"},[this._v("\n          选择的报价单：\n          "),e("div",{staticClass:"fs-12"},[this._v("\n            提示: 需要选择一份报价单才能开始制作表单\n          ")])])}]};var U=i("VU/8")(T,R,!1,function(t){i("DB4M")},"data-v-2afd7d36",null).exports,A={name:"ListingPlusFullMsg",data:function(){return{named:"",areas:[],contact_phoned:"",contact_area:"",tip_named:"",tip_contact_phoned:""}},mounted:function(){var t=this;u.a.area.getList_Area({},!0).then(function(e){t.areas=e,0==t.contact_area&&(t.contact_area=e[0].id)})},methods:{listingPlusSubmit:function(){}}},I={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal fade",attrs:{id:"listingFullMsgModal","data-backdrop":"static","data-keyboard":"false",tabindex:"-1",role:"dialog","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"}},[i("div",{staticClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},[i("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),i("div",{staticClass:"modal-body"},[i("form",{staticClass:"row"},[i("div",{staticClass:"form-group col-sm-12"},[i("label",{attrs:{for:"named"}},[t._v("联络人")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.named,expression:"named"}],staticClass:"form-control",attrs:{type:"text",id:"named",placeholder:"名称"},domProps:{value:t.named},on:{input:function(e){e.target.composing||(t.named=e.target.value)}}}),t._v(" "),i("small",{staticClass:"form-text text-muted",attrs:{id:"namedTip"}},[t._v(t._s(t.tip_named))])]),t._v(" "),i("div",{staticClass:"form-group col-sm-12"},[i("label",{attrs:{for:"contact_area"}},[t._v("联系电话")]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-4"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.contact_area,expression:"contact_area"}],staticClass:"form-control",attrs:{id:"contact_area"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.contact_area=e.target.multiple?i:i[0]}}},t._l(t.areas,function(e){return i("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.area))])}),0)]),t._v(" "),i("div",{staticClass:"col-sm-8"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.contact_phoned,expression:"contact_phoned"}],staticClass:"form-control",attrs:{type:"text",id:"contact_phoned",placeholder:"电话"},domProps:{value:t.contact_phoned},on:{input:function(e){e.target.composing||(t.contact_phoned=e.target.value)}}}),t._v(" "),i("small",{staticClass:"form-text text-muted",attrs:{id:"contact_phonedTip"}},[t._v(t._s(t.tip_contact_phoned))])])])])])]),t._v(" "),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("关闭")]),t._v(" "),i("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.listingPlusSubmit}},[t._v("提交")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[this._v("\n          完善信息\n          "),e("div",{staticClass:"fs-12"},[this._v("\n            提示: 发票信息完善后，才可提交\n          ")])])])}]};var j=i("VU/8")(A,I,!1,function(t){i("ZIDc")},"data-v-11f045a2",null).exports,B=i("JSMz"),D=i("Bmzg"),Z={name:"PdfInvoiceMember",props:{the_member:{type:Object}}},Q={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("table",{staticClass:"fs-12 w-100 pdf-table"},[i("tbody",{},[i("tr",[i("td",{attrs:{width:"72"}},[t._v("客户：")]),t._v(" "),i("td",{attrs:{colspan:"2"}},[t._v(t._s(t.the_member.named))])]),t._v(" "),i("tr",[i("td",[t._v("地址：")]),t._v(" "),i("td",{attrs:{colspan:"2"}},[t._v(t._s(t.the_member.addr))])]),t._v(" "),t._m(0),t._v(" "),i("tr",[i("td",[t._v("联络人：")]),t._v(" "),i("td",{attrs:{width:"40%"}},[t._v(t._s(t.the_member.contact_named))]),t._v(" "),i("td")]),t._v(" "),i("tr",[i("td",[t._v("电话：")]),t._v(" "),i("td",[t._v(t._s(t.the_member.area.area)+" "+t._s(t.the_member.phoned))]),t._v(" "),i("td",[t._v("传真：")])]),t._v(" "),i("tr",[i("td",[t._v("电邮地址：")]),t._v(" "),i("td",{attrs:{colspan:"2"}},[t._v(t._s(t.the_member.email))])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{attrs:{colspan:"3"}},[this._v(" ")])])}]};var z=i("VU/8")(Z,Q,!1,function(t){i("bVx4")},"data-v-df72282e",null).exports,H={name:"PdfInvoiceMsg",props:{listing_num:{type:String},listing_time:{type:String},member_num:{type:String},listing_payment:{type:String}}},q={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("table",{staticClass:"pdf-table w-100 fs-12"},[i("tbody",{},[i("tr",[i("td",{attrs:{width:"48%"}},[t._v("发票编号：")]),t._v(" "),i("td",[t._v(t._s(t.listing_num))])]),t._v(" "),i("tr",[i("td",[t._v("发票日期：")]),t._v(" "),i("td",[t._v(t._s(t.listing_time))])]),t._v(" "),t._m(0),t._v(" "),i("tr",[i("td",[t._v("客户编号：")]),t._v(" "),i("td",[t._v(t._s(t.member_num))])]),t._v(" "),i("tr",[i("td",[t._v("付款方式：")]),t._v(" "),i("td",[t._v(t._s(t.listing_payment))])]),t._v(" "),t._m(1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",[this._v("参考编号：")]),this._v(" "),e("td")])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",[this._v("销售员：")]),this._v(" "),e("td")])}]};var J=i("VU/8")(H,q,!1,function(t){i("oRIp")},"data-v-9ef3552c",null).exports,W={name:"PdfInvoiceFreight",props:{lising_content:{type:Array}},computed:{freight_price:function(){},result_price:function(){var t=0,e=!0,i=!1,s=void 0;try{for(var n,a=p()(this.lising_content);!(e=(n=a.next()).done);e=!0){var r=n.value,l=r.price,o=r.count,c=_.a.floatNum.floatMul(l,o);t=_.a.floatNum.floatAdd(c,t)}}catch(t){i=!0,s=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw s}}return t}},methods:{unit:function(t){return d.a.ser_unit(t)}}},X={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("table",{staticClass:"pdf-table fs-12 w-100 pdf-table-freight mt-2 text-center"},[t._m(0),t._v(" "),i("tbody",[t._l(t.lising_content,function(e,s){return i("tr",{key:e.id},[i("td",[t._v(t._s(s+1))]),t._v(" "),i("td",[t._v(t._s(e.num))]),t._v(" "),i("td",{staticClass:"text-left pl-2"},[t._v(t._s(e.named))]),t._v(" "),i("td",[i("div",{staticClass:"text-right float-left",staticStyle:{width:"60%"}},[t._v(t._s(e.count)+" ")]),t._v(" "),i("div",{staticClass:"text-left float-left",staticStyle:{width:"40%"}},[t._v(t._s(t.unit(e.unit)))])]),t._v(" "),i("td",{staticClass:"text-right pr-2"},[t._v(t._s(e.price))]),t._v(" "),i("td",[t._v(" ")]),t._v(" "),i("td",{staticClass:"text-right pr-2"},[t._v(t._s((parseFloat(e.price)*parseFloat(e.count)).toFixed(2)))])])}),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),i("tr",{staticClass:"pdf-table-freight-footer"},[i("td"),t._v(" "),i("td",{attrs:{colspan:"3"}}),t._v(" "),i("td",{staticClass:"footer-title-td"},[t._v("统计")]),t._v(" "),i("td",[t._v("HK$")]),t._v(" "),i("td",{staticClass:"text-right pr-2"},[t._v(t._s(t.result_price))])])],2)])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",{},[i("th",{attrs:{width:"7%"}},[t._v("项号")]),t._v(" "),i("th",{attrs:{width:"10%"}},[t._v("货号")]),t._v(" "),i("th",{attrs:{width:"31%"}},[t._v("描述")]),t._v(" "),i("th",{attrs:{width:"13.24%"}},[t._v("数量")]),t._v(" "),i("th",{attrs:{width:"11.76%"}},[t._v("单价")]),t._v(" "),i("th",{attrs:{width:"7%"}},[t._v("折扣")]),t._v(" "),i("th",{attrs:{width:"10%"}},[t._v("金额")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",{staticClass:"pdf-table-freight-footer br-t-pdf"},[e("td",[this._v("备注")]),this._v(" "),e("td",{attrs:{colspan:"3"}}),this._v(" "),e("td",{staticClass:"footer-title-td"},[this._v("项目合计")]),this._v(" "),e("td",[this._v("HK$")]),this._v(" "),e("td")])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",{staticClass:"pdf-table-freight-footer"},[e("td"),this._v(" "),e("td",{attrs:{colspan:"3"}}),this._v(" "),e("td",{staticClass:"footer-title-td"},[this._v("附加费")]),this._v(" "),e("td"),this._v(" "),e("td")])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",{staticClass:"pdf-table-freight-footer"},[e("td"),this._v(" "),e("td",{attrs:{colspan:"3"}}),this._v(" "),e("td",{staticClass:"footer-title-td"},[this._v("折扣")]),this._v(" "),e("td"),this._v(" "),e("td")])}]};var G=i("VU/8")(W,X,!1,function(t){i("EMcx")},"data-v-3941d76a",null).exports,K={components:{PdfFooter:B.a,PdfHeader:D.a,Loading:O.a,PdfInvoiceMember:z,PdfInvoiceMsg:J,PdfInvoiceFreight:G},name:"PricesPdf",props:{_numed:{type:String},_timed:{type:String},_payment:{typ:Number},membery:{type:Object},isPrint:{type:Boolean,default:!1},_listing_content:{type:Array,default:null}},mounted:function(){},data:function(){return{isLoading:!0}},methods:{ser_payment:function(t){return d.a.ser_listing_paymet(t)},printPdf:function(){}}},Y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog",id:"listingPdfViewModal"}},[i("div",{staticClass:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-body"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-12 text-center fs-12 mt-2"},[i("pdf-header",[t._v("\n              发票\n            ")])],1),t._v(" "),i("div",{staticClass:"col-sm-12"},[i("table",{staticClass:"pdf-table-outter"},[i("tr",[i("td",{attrs:{width:"68%"}},[i("pdf-invoice-member",{attrs:{the_member:t.membery}})],1),t._v(" "),i("td",[i("pdf-invoice-msg",{attrs:{listing_num:t._numed,listing_time:t._timed,listing_payment:t.ser_payment(t._payment),member_num:t.membery.num}})],1)])])]),t._v(" "),i("div",{staticClass:"col-sm-12"},[null!=t._listing_content?i("pdf-invoice-freight",{attrs:{lising_content:t._listing_content}}):t._e()],1)]),t._v(" "),null!=t.membery?i("pdf-footer",{attrs:{member:t.membery}}):t._e()],1),t._v(" "),i("div",{staticClass:"modal-footer fs-12"},[i("button",{staticClass:"btn btn-light btn-sm close-btn",attrs:{"data-dismiss":"modal"}},[t._v("关闭")]),t._v(" "),t.isPrint?i("button",{staticClass:"btn btn-outline-info btn-sm print-btn",on:{click:t.printPdf}},[t._v("导出 Pdf")]):t._e()])])])])},staticRenderFns:[]};var tt=i("VU/8")(K,Y,!1,function(t){i("rPZp")},"data-v-25d7c4f6",null).exports,et={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal fade",attrs:{id:"submitModal","data-keyboard":"false",tabindex:"-1",role:"dialog","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"}},[i("div",{staticClass:"modal-dialog modal-dialog-centered"},[i("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),i("div",{staticClass:"modal-body"},[t._v("\n        你确定要提交吗？\n      ")]),t._v(" "),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),i("button",{staticClass:"btn btn-main",attrs:{type:"button"},on:{click:t.sureSubmit}},[t._v("确定")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"staticBackdropLabel"}},[this._v("提示")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]};var it=i("VU/8")({name:"SubmitModal",methods:{sureSubmit:function(){this.$emit("submitConfirm")}}},et,!1,function(t){i("9Wpn")},"data-v-59fa257b",null).exports,st=i("uT2u"),nt={name:"ListingPlus",components:{DefLayout:v.a,ListingPlusTop:g,ListingPlusBody:y,ListingPlusFooter:N,Loading:O.a,ListingChoiseModal:U,ListingPlusFullMsg:j,ListingPdfModal:tt,Submit:it,CustomModal:st.a},data:function(){return{listingContent:[],prices:null,select:[],selectContent:[],isLoading:!0,timed:"",numed:"",payment:0,result_price:""}},mounted:function(){this.loadPrices(),this.loadContent()},methods:{loadPrices:function(){if(null==this.prices){var t=_.a.storage._get("listing_active_prices");return null!=t&&""!=t&&void 0!=t?this.prices=JSON.parse(t):this.openPriceChoise(),!1}return!0},loadContent:function(){var t=this;if(null!=this.prices){var e={price_collect:this.prices.id};u.a.prices_content.getOneByPrices(e).then(function(e){if(u.a.judge_response_list(e)){var i=JSON.parse(e[0].content);for(var s in t.listingContent=[],i)t.listingContent.push(r()({},i[s],{zk:"",count:"0.00",res:"0.00"}));t.select=[t.listingContent[0].id]}t.isLoading=!1})}else _.a.showModal("pricesChoiseModal")},openPriceChoise:function(){_.a.showModal("pricesChoiseModal")},reciverPrices:function(t){this.prices=t,_.a.storage._set("listing_active_prices",n()(t)),this.loadContent()},collectSelect:function(){var t=this;this.selectContent=this.listingContent.filter(function(e){return _.a.inList(e.id,t.select)}),this.selectContent=this.selectContent.map(function(t){return t.res=_.a.floatNum.floatMul(t.count,t.price),t}),this.select.length>1?this.result_price=this.selectContent.reduce(function(t,e){return _.a.floatNum.floatAdd(t.res,e.res)}):this.result_price=this.selectContent[0].res},collectMsg:function(){var t=this.$refs.lpFooter.validateInput();return 0!=t&&(this.timed=t.timed,this.numed=t.numed,this.payment=t.payment,!0)},_submit:function(t){var e=this;u.a.listing.add(t).then(function(t){u.a.judge_response(t)&&u.a.listing_content.add({listing_id:t.id,content:n()(e.select_content)}).then(function(t){u.a.judge_response(t)&&(_.a.showToast("新增成功！！！"),_.a.storage._set("listing_active_prices",""),_.a.closeAllModal(),setTimeout(function(){e.$router.push("/home/listing")},700))})})},submit:function(){var t={num:this.numed,listing_time:this.timed+" 00:00:00",pay_way:this.payment,membery_id:this.prices.membery.id,price_collect_id:this.prices.id,freight_item_num:this.select.length,total_price_freight:this.result_price,result_price:this.result_price};this._submit(t)},pricesSubmit:function(){if(this.collectMsg()){this.collectSelect();var t=this.selectContent.filter(function(t){return 0==t.res});t.length>0?_.a.showToast("存在 "+t.length+"项 数量为 0 的选项！！！"):_.a.showModal("submitModal")}},pricesPdfView:function(){this.collectMsg()&&(this.collectSelect(),_.a.showModal("listingPdfViewModal"))}}},at={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("def-layout",[i("div",{attrs:{slot:"layout_title"},slot:"layout_title"},[t._v("新增发票")]),t._v(" "),i("listing-plus-top",{attrs:{slot:"layout_inner_head",_listings:t.listingContent,_select:t.select},slot:"layout_inner_head"}),t._v(" "),t.listingContent.length>0?i("listing-plus-body",{attrs:{slot:"layout_inner_body",_listingContent:t.listingContent,_select:t.select},slot:"layout_inner_body"}):i("transition",{attrs:{slot:"layout_inner_body",name:"fade"},slot:"layout_inner_body"},[i("loading")],1),t._v(" "),i("listing-plus-footer",{ref:"lpFooter",attrs:{slot:"layout_footer",the_prices:t.prices},on:{pricesPdfView_Father:t.pricesPdfView,pricesSubmit_Father:t.pricesSubmit},slot:"layout_footer"}),t._v(" "),i("div",{attrs:{slot:"layout_extra"},slot:"layout_extra"},[i("listing-choise-modal",{on:{returnChoised:t.reciverPrices}}),t._v(" "),i("listing-plus-full-msg"),t._v(" "),null!=t.prices?i("listing-pdf-modal",{attrs:{membery:t.prices.membery,_listing_content:t.selectContent,_numed:t.numed,_timed:t.timed,_payment:t.payment}}):t._e(),t._v(" "),i("custom-modal",{attrs:{id_prefix:"sureChangePrices",title:"提示",txt:"更改所属报价单会造成发票的菜品内容被替换，是否继续？"},on:{done_Father:t.openPriceChoise}},[i("div",{attrs:{slot:"submit_text"},slot:"submit_text"},[t._v("继续")])]),t._v(" "),i("submit",{on:{submitConfirm:t.submit}})],1)],1)},staticRenderFns:[]};var rt=i("VU/8")(nt,at,!1,function(t){i("JTOV")},"data-v-28471473",null);e.default=rt.exports},U6je:function(t,e,i){"use strict";var s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"h-full bg-hui content-complex-wrapper"},[i("div",{staticClass:"content-complex pt-2 pb-1"},[i("div",{staticClass:"content-header mt-2"},[i("h2",[t._t("layout_title")],2)]),t._v(" "),i("div",{staticClass:"content-panel def-shadow"},[i("div",{staticClass:"content-panel-inner"},[i("div",{staticClass:"cpc-head"},[t._t("layout_inner_head")],2),t._v(" "),i("div",{staticClass:"cpc-body cpc-border-fix"},[t._t("layout_inner_body")],2)]),t._v(" "),i("div",{staticClass:"content-panel-footer"},[t._t("layout_footer")],2)])]),t._v(" "),t._t("layout_extra")],2)},staticRenderFns:[]};var n=i("VU/8")({name:"DefLayout"},s,!1,function(t){i("kqNq")},"data-v-3e5ef99a",null);e.a=n.exports},V3tA:function(t,e,i){i("R4wc"),t.exports=i("FeBl").Object.assign},X7IM:function(t,e){},ZIDc:function(t,e){},bVx4:function(t,e){},c3q6:function(t,e){},kqNq:function(t,e){},oRIp:function(t,e){},pGnZ:function(t,e){},rPZp:function(t,e){},ryLw:function(t,e,i){"use strict";i("5nBN");var s=i("NAQQ"),n=i("I76R"),a=i.n(n),r={name:"ListingTimedInoput",props:{the_name:{type:String},the_tip_header:{type:String},the_placeholder:{type:String},the_min_length:{type:Number,default:9},the_max_length:{type:Number,default:10}},data:function(){return{value:""}},methods:{tipToast:function(t){s.a.showToast(t)},valueValidate:function(){var t=a.a.val_empty(this.value,this.the_tip_header);1==t&&(1==(t=a.a.val_length(this.value,this.the_tip_header,this.the_min_length,this.the_max_length))?this.valueSubmit():s.a.showToast(t))},valueSubmit:function(){this.$emit("returnValue",this.value)}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-group m-0"},[i("label",{staticClass:"col-form-label p-0",attrs:{for:"input_"+t.the_name}},[t._t("input_txt")],2),t._v(" "),i("div",{staticClass:"input-wrapper"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"form-control",attrs:{type:"text",id:"input_"+t.the_name,name:t.the_name,placeholder:t.the_placeholder},domProps:{value:t.value},on:{change:t.valueValidate,input:function(e){e.target.composing||(t.value=e.target.value)}}})])])},staticRenderFns:[]};var o=i("VU/8")(r,l,!1,function(t){i("DZcW")},"data-v-377df97e",null);e.a=o.exports},s89H:function(t,e,i){"use strict";var s={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"loading"})},staticRenderFns:[]};var n=i("VU/8")({name:"LoadingMiddle"},s,!1,function(t){i("tzQp")},"data-v-53589150",null);e.a=n.exports},tzQp:function(t,e){},woOf:function(t,e,i){t.exports={default:i("V3tA"),__esModule:!0}}});
//# sourceMappingURL=1.a9de9636232a20d0f0ac.js.map