webpackJsonp([4],{"+X9T":function(t,e){},B4CL:function(t,e,i){"use strict";i("NAQQ"),i("5nBN");var a=i("3MUH"),s={name:"PageOption",props:{_page:{type:Object}},methods:{totalPage:function(){return a.a.getTotalPage(this._page.limit,this._page.count)},nowPage:function(){return a.a.getNowPage(this._page.offsetNow,this._page.limit)},pageOption:function(t){var e="";e=t?this._page.next:this._page.previous,this.$emit("loadData_Father",e)}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("button",{staticClass:"btn btn-sm btn-pager",on:{click:function(e){return t.pageOption(!1)}}},[t._v("上一页")]),t._v(" "),i("div",{staticClass:"page-num-wrapper d-inline text-input"},[t._v("\n    "+t._s(t.nowPage())+"/"+t._s(t.totalPage())+"\n  ")]),t._v(" "),i("button",{staticClass:"btn btn-sm btn-pager",on:{click:function(e){return t.pageOption(!0)}}},[t._v("下一页")])])},staticRenderFns:[]};var o=i("VU/8")(s,n,!1,function(t){i("VCwt")},"data-v-5a460a61",null);e.a=o.exports},I0mC:function(t,e){},MBAv:function(t,e){},PvKo:function(t,e){},Rpsr:function(t,e){},VCwt:function(t,e){},YQkM:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("NAQQ"),s=i("/xUl"),n=i("3MUH"),o=i("gS0T"),r=i("UQ+I"),l=i("0ti1"),u={components:{SortOption:r.a,SearchOption:l.a},name:"FreightViewTop",props:{freights:{type:Array}},methods:{openSearch:function(){a.a.showModal("freightSearchModal")}}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"row of-visible"},[this._m(0),this._v(" "),e("div",{staticClass:"col-sm-6 pt-1 text-right of-visible"},[e("sort-option",{attrs:{_list:this.freights}}),this._v(" "),e("search-option",{on:{openSearch_Father:this.openSearch}})],1)]),this._v(" "),this._m(1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-sm-6 pt-2"},[e("h5",{staticClass:"fw-none"},[this._v("\n        全部\n      ")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("table",{staticClass:"table"},[i("tr",[i("td",{staticClass:"text-accent",attrs:{width:"5%"}},[t._v("#")]),t._v(" "),i("td",{attrs:{width:"10%"}},[t._v("编号")]),t._v(" "),i("td",{attrs:{width:"20%"}},[t._v("菜品描述")]),t._v(" "),i("td",{attrs:{width:"15%"}},[t._v("价格")]),t._v(" "),i("td",{attrs:{width:"10%"}},[t._v("单位")]),t._v(" "),i("td",{attrs:{width:"30%"}},[t._v("标签")]),t._v(" "),i("td",{attrs:{width:"10%"}})])])}]};var d=i("VU/8")(u,c,!1,function(t){i("dB1n")},"data-v-4e2a3f20",null).exports,h=(i("7t+N"),i("0jG4"),i("5nBN")),p=i.n(h),m=i("z8RL"),v=i("SiM+"),_={name:"FreightViewBody",components:{Pencil:m.a,Remove:v.a},props:{freights:{type:Array}},methods:{unit:function(t){return p.a.ser_unit(t)},option:function(t,e){this.$emit("option_Father",t,e)}}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("table",{staticClass:"table m-0 table-top-line-none"},t._l(t.freights,function(e,a){return i("tr",{key:e.id,attrs:{id:"freight_tr_"+e.id}},[i("td",{staticClass:"text-accent",attrs:{width:"5%"}},[t._v(t._s(a+1))]),t._v(" "),i("td",{attrs:{width:"10%"}},[t._v(t._s(e.num))]),t._v(" "),i("td",{attrs:{width:"20%"}},[t._v(t._s(e.named))]),t._v(" "),i("td",{attrs:{width:"15%"}},[t._v("$ "+t._s(e.price))]),t._v(" "),i("td",{attrs:{width:"10%"}},[t._v("  "+t._s(t.unit(e.unit)))]),t._v(" "),i("td",{attrs:{width:"30%"}},t._l(e.tag,function(e){return i("div",{key:e.id,staticClass:"tag tag-table tag-table-fix",style:{background:e.color}},[t._v("\n        "+t._s(e.named)+"\n      ")])}),0),t._v(" "),i("td",{attrs:{width:"10%"}},[i("i",{staticClass:"float-right",on:{click:function(i){return t.option(e.id,"trash")}}},[i("remove")],1),t._v(" "),i("i",{staticClass:"float-right",on:{click:function(i){return t.option(e.id,"update")}}},[i("pencil")],1)])])}),0)},staticRenderFns:[]};var g=i("VU/8")(_,f,!1,function(t){i("PvKo")},"data-v-5dc16bc2",null).exports,F=i("WNq0"),b={components:{PagerOption:i("B4CL").a},name:"FreightViewFooter",props:{_pageLink:{type:Object}},methods:{_loadData:function(t){this.$emit("_loadData_Father",t)}}},y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-6"}),this._v(" "),e("div",{staticClass:"col-sm-6 text-right"},[e("pager-option",{attrs:{_page:this._pageLink},on:{loadData_Father:this._loadData}})],1)])},staticRenderFns:[]};var C=i("VU/8")(b,y,!1,function(t){i("s/GW")},"data-v-cee68856",null).exports,w=i("cpG1"),x=i("HT3s"),P=i("U5hB"),L={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"fixed-plus-btn hand",on:{click:this.plusDone}})},staticRenderFns:[]};var R=i("VU/8")({name:"PlusFixed",methods:{plusDone:function(){this.$emit("plusDone_Father")}}},L,!1,function(t){i("+X9T")},null,null).exports,U=i("BO1k"),k=i.n(U),D=i("I76R"),$=i.n(D),T={name:"FreightPlusForm",props:{isPlus:{type:Boolean}},data:function(){return{select:[],tags:[],num:"",tip_num:"",named:"",tip_named:"",price:"",tip_price:"",unit:0,tip_tag:"",activeId:0}},computed:{units:function(){return p.a.unitList.map(function(t){return{flag:t[0],named:t[1]}})}},mounted:function(){this.loadTag()},methods:{locationData:function(t){if(null!=t&&void 0!=t){if(this.named=t.named,this.price=t.price,this.unit=t.unit,this.num=t.num,this.select=[],null!=t.tag&&void 0!=t.tag){var e=[],i=!0,s=!1,n=void 0;try{for(var o,r=k()(t.tag);!(i=(o=r.next()).done);i=!0){var l=o.value;e.push(l.id)}}catch(t){s=!0,n=t}finally{try{!i&&r.return&&r.return()}finally{if(s)throw n}}var u=!0,c=!1,d=void 0;try{for(var h,p=k()(this.tags);!(u=(h=p.next()).done);u=!0){var m=h.value;a.a.inList(m.id,e)&&this.select.push(m.id)}}catch(t){c=!0,d=t}finally{try{!u&&p.return&&p.return()}finally{if(c)throw d}}}this.activeId=t.id}},loadTag:function(){var t=this;s.a.tag.getList_Tag({},!0).then(function(e){s.a.judge_response(e)&&(t.tags=e,t.select.push(e[0].id))})},inList:function(t,e){return a.a.inList(t,e)},tagChoise:function(t){var e=a.a.indexList(t,this.select);e>=0?this.select.length<=1?(a.a.showToast("提示：请至少选择一个标签。"),console.log("标签")):this.select.splice(e,1):this.select.push(t)},tipClose:function(t){var e=this;setTimeout(function(){"num"==t?e.tip_num="":"named"==t?e.tip_named="":"price"==t&&(e.tip_price="")},4200)},tipForm:function(t,e){var i="";1!=t&&(i=t),"num"==e?this.tip_num=i:"named"==e?this.tip_named=i:"price"==e&&(this.tip_price=i),this.tipClose(e)},validateForm:function(){var t=$.a.val_empty(this.num,"货号");return 1==t?(t=$.a.val_char(this.num,"货号"),this.tipForm(t,"num")):this.tipForm(t,"num"),1==(t=$.a.val_empty(this.named,"描述"))?(t=$.a.val_char(this.named,"描述"),this.tipForm(t,"named")):this.tipForm(t,"named"),1==(t=$.a.val_empty(this.price,"零售价"))?(t=$.a.val_char_price(this.price,"零售价"),this.tipForm(t,"price")):this.tipForm(t,"price"),t},_submit:function(t){this.isPlus?this.$emit("plus_Father",t):this.$emit("update_Father",t,this.activeId)},submitForm:function(){if(1==this.validateForm()){var t={num:this.num,named:this.named,price:this.price,unit:this.unit,tags:this.select.join(",")};this._submit(t)}}}},M={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal-form-wrapper"},[i("form",[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"num"}},[t._v("货号")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.num,expression:"num"}],staticClass:"form-control",attrs:{type:"text",id:"num",placeholder:"货号"},domProps:{value:t.num},on:{input:function(e){e.target.composing||(t.num=e.target.value)}}}),t._v(" "),i("small",{staticClass:"form-text text-muted",attrs:{id:"numTip"}},[t._v(t._s(t.tip_num))])]),t._v(" "),i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"named"}},[t._v("描述")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.named,expression:"named"}],staticClass:"form-control",attrs:{type:"text",id:"named",placeholder:"描述"},domProps:{value:t.named},on:{input:function(e){e.target.composing||(t.named=e.target.value)}}}),t._v(" "),i("small",{staticClass:"form-text text-muted",attrs:{id:"numTip"}},[t._v(t._s(t.tip_named))])]),t._v(" "),i("div",{staticClass:"form-group row"},[i("div",{staticClass:"col-sm-4"},[i("label",{attrs:{for:"price"}},[t._v("零售价")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],staticClass:"form-control",attrs:{type:"text",id:"price",placeholder:"价格"},domProps:{value:t.price},on:{input:function(e){e.target.composing||(t.price=e.target.value)}}}),t._v(" "),i("small",{staticClass:"form-text text-muted",attrs:{id:"numTip"}},[t._v(t._s(t.tip_price))])]),t._v(" "),i("div",{staticClass:"col-sm-4"},[i("label",{attrs:{for:"unit"}},[t._v("单位")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.unit,expression:"unit"}],staticClass:"form-control",attrs:{id:"unit"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.unit=e.target.multiple?i:i[0]}}},t._l(t.units,function(e){return i("option",{key:e.flag,domProps:{value:e.flag}},[t._v(t._s(e.named))])}),0)]),t._v(" "),i("div",{staticClass:"col-sm-4"})]),t._v(" "),i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"named"}},[t._v("标签")]),t._v(" "),t.tags.length>0?i("div",{staticClass:"tag-wrapper"},t._l(t.tags,function(e){return i("div",{key:e.named,staticClass:"tag tag-def d-inline hand",class:{"tag-active":t.inList(e.id,t.select)},on:{click:function(i){return t.tagChoise(e.id)}}},[t._v("\n          "+t._s(e.named)+"\n        ")])}),0):t._e(),t._v(" "),i("small",{staticClass:"form-text text-muted",attrs:{id:"numTip"}},[t._v(t._s(t.tip_tag))])])])])},staticRenderFns:[]};var V=i("VU/8")(T,M,!1,function(t){i("keuR")},"data-v-32a9a37d",null).exports,E={components:{FreightPlusForm:V},name:"FreightPlus",props:{freight:{type:Object}},methods:{submitFreightPlus:function(){this.$refs.plusForm.submitForm()},_signelRefreash:function(){this.$emit("signelRefreash_Father")},_plus:function(t){var e=this;s.a.freight.add(t).then(function(t){s.a.judge_response(t)&&(console.log(t),a.a.showToast("新增成功！！！"),setTimeout(function(){a.a.closeAllModal(),e._signelRefreash()},700))})}}},I={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog",id:"freightPlusModal"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-body"},[e("freight-plus-form",{ref:"plusForm",attrs:{isPlus:!0,_freight:this.freight},on:{plus_Father:this._plus}})],1),this._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-main",on:{click:this.submitFreightPlus}},[this._v("保存")])])])])])},staticRenderFns:[]};var O=i("VU/8")(E,I,!1,function(t){i("Rpsr")},"data-v-57eb972e",null).exports,B={name:"FreightUpdated",components:{FreightPlusForm:V},props:{freight:{type:Object}},methods:{submitFreightPlus:function(){this.$refs.updateFormREF.submitForm()},update:function(t,e){var i=this;s.a.freight.update(t,e).then(function(t){s.a.judge_response(t)&&(console.log(t),a.a.showToast("修改成功！！！"),setTimeout(function(){a.a.closeAllModal(),i.$emit("signelRefreash_Father")},700))})},locationUpdateData:function(t){this.$refs.updateFormREF.locationData(t)}}},N={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog",id:"freightUpdateModal"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-body"},[e("freight-plus-form",{ref:"updateFormREF",attrs:{isPlus:!1},on:{update_Father:this.update}})],1),this._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-main",on:{click:this.submitFreightPlus}},[this._v("保存")])])])])])},staticRenderFns:[]};var j=i("VU/8")(B,N,!1,function(t){i("I0mC")},"data-v-ad767e76",null).exports,A={components:{FullHeightLayout:o.a,FreightViewTop:d,FreightViewBody:g,FreightViewSearch:F.a,FreightViewFooter:C,Trash:x.a,Empty:w.a,Loading:P.a,PlusFixed:R,FreightPlus:O,FreightUpdated:j},name:"FreightView",data:function(){return{freightList:[],pageLink:{next:"",previous:"",count:0,offsetNow:0,limit:100},isLoading:!0,activeId:0,activeFreight:null,activeURL:""}},mounted:function(){this.loadData()},methods:{loadData:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null==t&&(t=n.a.buildFirstPagerUrl(s.a.freight.url,i,{offset:0,limit:this.pageLink.limit})),s.a.freight.getListPage(t).then(function(i){e.activeURL=t,e.freightList=i.results,e.pageLink=n.a.buildPageLink(t,i.count,100,i.next,i.previous),e.isLoading=!1})},plusDone:function(){a.a.showModal("freightPlusModal")},locationUpdateData:function(){this.loadData(this.activeURL)},option:function(t,e){var i=this;this.activeId=t,"trash"==e?a.a.showModal("trashModal"):"update"==e&&s.a.freight.getOne(t).then(function(t){s.a.judge_response(t)&&(i.activeFreight=t,i.$refs.freightUpdateREF.locationUpdateData(t),a.a.showModal("freightUpdateModal"))})},_trash:function(){var t=this,e=this;a.a.closeModal("trashModal"),null!=this.activeId&&this.activeId>0&&s.a.freight.trash(this.activeId).then(function(i){s.a.judge_response(i)&&(a.a.showToast("删除成功！！"),a.a.hideEle("freight_tr_"+t.activeId),e.isLoading=!1)})}}},S={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("full-height-layout",[i("div",{attrs:{slot:"layout_title"},slot:"layout_title"},[t._v("菜品")]),t._v(" "),i("freight-view-top",{attrs:{slot:"layout_inner_head",freights:t.freightList},slot:"layout_inner_head"}),t._v(" "),t.freightList.length>0?i("freight-view-body",{attrs:{slot:"layout_inner_body",freights:t.freightList},on:{option_Father:t.option},slot:"layout_inner_body"}):t.isLoading?i("loading",{attrs:{slot:"layout_inner_body"},slot:"layout_inner_body"}):i("empty",{attrs:{slot:"layout_inner_body"},slot:"layout_inner_body"}),t._v(" "),i("freight-view-footer",{attrs:{slot:"layout_footer",_pageLink:t.pageLink},on:{_loadData_Father:t.loadData},slot:"layout_footer"}),t._v(" "),i("div",{attrs:{slot:"layout_extra"},slot:"layout_extra"},[i("freight-view-search",{on:{loadData_Father:t.loadData}}),t._v(" "),i("trash",{on:{trashItem:t._trash}}),t._v(" "),i("plus-fixed",{on:{plusDone_Father:t.plusDone}}),t._v(" "),i("freight-plus",{on:{signelRefreash_Father:t.loadData}}),t._v(" "),i("freight-updated",{ref:"freightUpdateREF",attrs:{freight:t.activeFreight},on:{signelRefreash_Father:t.locationUpdateData}})],1)],1)},staticRenderFns:[]};var Q=i("VU/8")(A,S,!1,function(t){i("MBAv")},"data-v-b97daedc",null);e.default=Q.exports},dB1n:function(t,e){},keuR:function(t,e){},"s/GW":function(t,e){}});
//# sourceMappingURL=4.294e326e83af14054c2e.js.map